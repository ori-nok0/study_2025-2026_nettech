---
## Front matter
lang: ru-RU
title: Лабораторная работа №8
subtitle: "Настройка протоколов маршрутизации (RIP, OSPF) и туннелирования IPv6"
author:
  - Лисовская А.В.
institute:
  - Российский университет дружбы народов, Москва, Россия
date: 20 декабря 2025

## i18n babel
babel-lang: russian
babel-otherlangs: english

## Formatting pdf
toc: false
toc-title: Содержание
slide_level: 2
aspectratio: 169
section-titles: true
theme: metropolis
header-includes:
 - \metroset{progressbar=frametitle,sectionpage=progressbar,numbering=fraction}
 - '\\makeatletter'
 - '\\beamer@ignorenonframefalse'
 - '\\makeatother'

## Fonts
mainfont: PT Serif
romanfont: PT Serif
sansfont: PT Sans
monofont: PT Mono
mainfontoptions: Ligatures=TeX
romanfontoptions: Ligatures=TeX
sansfontoptions: Ligatures=TeX,Scale=MatchLowercase
monofontoptions: Scale=MatchLowercase,Scale=0.9
---

## Докладчик

:::::::::::::: {.columns align=center}
::: {.column width="70%"}

  * Лисовская Арина Валерьевна
  * Студентка группы НПИбд-01-23
  * Российский университет дружбы народов
  * [1132231434@rudn.ru](mailto:1132231434@rudn.ru)

:::
::: {.column width="30%"}

![](image/author.png)

:::
::::::::::::::

# Введение

## Цель работы

* Изучение принципов работы и приобретение практических навыков по настройке протоколов динамической маршрутизации (RIP и OSPF).
* Настройка стеков IPv4 и IPv6 (Dual Stack).
* Реализация механизмов туннелирования IPv6 поверх IPv4 (6in4).
* Диагностика сетевых проблем и анализ трафика.

# Базовая настройка сети (1–4)

## Схема сети и топология

Основа лабораторного стенда — топология, включающая маршрутизаторы и клиентские узлы.

![Схема сети (топология)](image/1.png){width=60%}

## Настройка интерфейсов и ПК

Базовая настройка IP-адресов на маршрутизаторе и виртуальных ПК (VPCS/PCS) для проверки начальной связности.

![Настройка gw-01 и ПК (2-4)](image/2.png){width=30%}
![Настройка VPCS](image/3.png){width=30%}
![Настройка PCS](image/4.png){width=30%}

# Настройка маршрутизаторов FRR (5–10)

## Конфигурация интерфейсов FRR

Назначение адресов на интерфейсы eth0-eth2 и активация интерфейсов командами `no shutdown`.

![Конфигурация интерфейсов (5-7)](image/5.png){width=45%}
![Активация eth (8-9)](image/6.png){width=45%}

## Проверка и сохранение

Вывод текущей конфигурации (`show running-config`) и сохранение изменений в память (`write memory`).

![Сохранение конфигурации (10)](image/10.png){width=60%}

# Настройка IPv6 (11–18)

## IPv6 на клиентских узлах

Настройка глобальных адресов IPv6 на виртуальных ПК (2001:10::a и 2001:11::a).

![Настройка IPv6 на ПК (11-12)](image/11.png){width=45%}
![Проверка IPv6 (13)](image/13.png){width=45%}

## IPv6 на маршрутизаторах

Включение IPv6-форвардинга и настройка адресации на интерфейсах маршрутизаторов.

![IPv6 на gw-02/04 (14-15)](image/14.png){width=45%}
![Просмотр конфига IPv6 (16-18)](image/16.png){width=45%}

# Протокол RIP v2 (19–34)

## Конфигурация RIPv2

Настройка процесса RIP, выбор версии и указание анонсируемых сетей на всех узлах.

![Настройка RIP (19-21)](image/19.png){width=45%}
![Настройка сетей (22)](image/22.png){width=45%}

## Таблицы маршрутизации и отказоустойчивость

Анализ обмена маршрутами и проверка перестроения сети при отключении интерфейса.

![Таблица маршрутов (23-24)](image/23.png){width=30%}
![Мониторинг RIP (26-27)](image/26.png){width=30%}
![Отказоустойчивость (28)](image/28.png){width=30%}

## Диагностика RIP

Проверка статуса интерфейсов, маршрутов и финальное тестирование связности.

![Статус интерфейсов (29-31)](image/29.png){width=45%}
![Финальные тесты RIP (32-34)](image/32.png){width=45%}

# RIPng и анализ трафика (35–40)

## Работа RIPng (IPv6)

Проверка связности через `ping` и `trace`, просмотр специфичных для IPv6 таблиц RIP.

![Тестирование связности IPv6 (35)](image/35.png){width=45%}
![Таблица RIPng (36-38)](image/36.png){width=45%}

## Анализ в Wireshark

Изучение структуры пакетов RIPv2, RIPng и ICMP-трафика.

![Снимки Wireshark (39-40)](image/39.png){width=60%}

# Протокол OSPF для IPv4 (41–51)

## Настройка областей OSPF

Конфигурация OSPF в зоне 0 (Area 0) и установление соседства между маршрутизаторами.

![Конфигурация OSPF (41-43)](image/41.png){width=45%}
![Соседи OSPF (44-46)](image/46.png){width=45%}

## Конвергенция и параметры

Анализ Hello-сообщений OSPF, проверка таблицы маршрутизации и таймеров.

![Трафик и маршруты (47-49)](image/47.png){width=45%}
![База данных и таймеры (50-51)](image/50.png){width=45%}

# Протокол OSPFv3 для IPv6 (52–60)

## Настройка OSPFv3

Использование `router ospf6` и привязка интерфейсов к областям.

![Конфигурация OSPFv3 (52-53)](image/52.png){width=45%}
![Маршруты OSPFv3 (54-55)](image/55.png){width=45%}

## Диагностика OSPFv3

Тестирование восстановления связности после имитации сбоя линка и анализ трафика.

![Отказоустойчивость (56-58)](image/56.png){width=45%}
![Трафик и таблицы (59-60)](image/59.png){width=45%}

# Туннелирование 6in4 (61–79)

## Схема и подготовка

Реализация туннеля `tun0` для передачи IPv6 трафика через IPv4 инфраструктуру.

![Схема туннеля (61)](image/61.png){width=60%}

## Конфигурация VyOS и SIT

Использование инкапсуляции SIT, настройка адресации и RIP на VyOS.

![Настройка VyOS (62-65)](image/64.png){width=45%}
![Статус tun0 (66-70)](image/67.png){width=45%}

## Инкапсуляция и трафик

Анализ заголовков пакетов 6in4 в Wireshark и настройка удаленного конца туннеля.

![Wireshark 6in4 (71-73)](image/73.png){width=60%}

## Тестирование и отладка

Исправление проблем маршрутизации и подтверждение работоспособности туннеля.

![Настройка адресов (74-75)](image/74.png){width=30%}
![Тест связности (76-77)](image/76.png){width=30%}
![Исправление маршрутов (78-79)](image/79.png){width=30%}

# Комплексная настройка (80–90)

## Интеграция протоколов на VyOS

Детальная конфигурация маршрутизаторов для совместной работы OSPF и IPv6.

![Конфигурация VyOS (80-82)](image/80.png){width=45%}
![Статус OSPF (83)](image/83.png){width=45%}

## Диагностика ошибок

Анализ проблем с OSPFv3 и исправление ошибок отсутствия маршрутов.

![Ошибки конфигурации (84-85)](image/84.png){width=45%}
![Ошибки связности (86-87)](image/86.png){width=45%}

## Итоговая диагностика

Отключение интерфейсов для проверки устойчивости и финальный анализ таблиц.

![Диагностика таблиц (88-90)](image/88.png){width=60%}

# Заключение

## Результаты работы

* Изучены принципы работы дистанционно-векторных (RIP) и состояний каналов (OSPF) протоколов.
* Успешно настроена сеть Dual Stack (IPv4 + IPv6).
* Реализовано туннелирование 6in4, обеспечивающее связность IPv6-сегментов.
* Освоены методы диагностики в сетевых ОС VyOS и FRR.